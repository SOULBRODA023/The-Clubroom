<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="stylesheet" href="/output.css" />
        <title>myclubhouse | <%= mode === 'signup' ? 'Signup' : 'Login' %></title>
        <!-- Using a custom font similar to the image for better visual match -->
        <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
        <style>
            body {
                font-family: 'Inter', sans-serif;
            }
        </style>
    </head>
    <body class="min-h-screen bg-gray-50 flex items-center justify-center p-4 text-gray-900 antialiased">
        <section class="max-w-md w-full bg-white p-8 rounded-xl shadow-lg border border-gray-200">
            <form
                action="<%= mode === 'login' ? '/login' : '/signup' %>"
                method="POST"
                class="w-full space-y-5"
            >
                <header class="mb-6 text-center">
                    <h1 class="text-3xl sm:text-4xl font-bold text-gray-900">
                        <%= mode === 'login' ? 'Welcome Back' : 'Create Account' %>
                    </h1>
                </header>
                <!-- General Error Display (if any non-field-specific errors) -->
                <% if (errors && errors.length > 0) { %>
                    <% const generalError = errors.find(error => !error.param); %>
                    <% if (generalError) { %>
                        <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg relative mb-4" role="alert">
                            <span class="block sm:inline"><%= generalError.msg %></span>
                        </div>
                    <% } %>
                <% } %>
                <main>
                    <% /* Conditional rendering for Signup fields */ %>
                    <% if (mode === 'signup') { %>
                    <!-- Last Name -->
                    <div>
                        <label for="lastname" class="sr-only">Last Name</label>
                        <div class="relative">
                            <div class="absolute inset-y-0 left-0 pl-3 flex border border-gray-300  focus:ring-2 focus:ring-violet-500 focus:border-violet-500 items-center rounded-lg pointer-events-none px-2 py-3 mb-3">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-user text-gray-400"><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
                                    <input
                                        type="text"
                                        name="lastname"
                                        id="lastname"
                                        value="<%= oldInput.lastname || '' %>"
                                        class="w-full pl-10 pr-4  px-3 focus:outline-none text-gray-700 <%= errors.find(error => error.param === 'lastname') ? 'border-red-500' : '' %>"
                                        placeholder="Last Name"
                                    />
                                </div>
                                    </div>
                                <% const lastnameError = errors.find(error => error.param === "lastname"); %>
                                <% if (lastnameError) { %>
                                <p class="text-red-600 text-sm mt-1"><%= lastnameError.msg %></p>
                                <% } %>
                    </div>
                    <!-- First Name -->
                    <div>
                        <label for="firstname" class="sr-only">First Name</label>
                        <div class="relative">
                       <div class="absolute inset-y-0 left-0 pl-3 flex border border-gray-300  focus:ring-2 focus:ring-violet-500 focus:border-violet-500 items-center rounded-lg pointer-events-none px-2 py-3 mb-3">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-user text-gray-400"><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
                                    <input
                                        type="text"
                                        name="firstname"
                                        id="firstname"
                                        value="<%= oldInput.firstname || '' %>"
                                        class="w-full pl-10 pr-4 px-3 focus:outline-none text-gray-700 <%= errors.find(error => error.param === 'firstname') ? 'border-red-500' : '' %>"
                                        placeholder="First Name"
                                    />
                                </div>
                            </div>
                                <% const firstnameError = errors.find(error => error.param === "firstname"); %>
                                <% if (firstnameError) { %>
                                <p class="text-red-600 text-sm mt-1"><%= firstnameError.msg %></p>
                                <% } %>
                    </div>
                    <% } %>
                    <% /* End Conditional rendering for Signup fields */ %>
                    <!-- Email Field (always shown) -->
                    <div>
                        <label for="email" class="sr-only">Email</label>
                        <div class="relative">
                          <div class="absolute inset-y-0 left-0 pl-3 flex border border-gray-300  focus:ring-2 focus:ring-violet-500 focus:border-violet-500 items-center rounded-lg pointer-events-none  px-2 py-3 mb-3">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-mail text-gray-400"><rect width="20" height="16" x="2" y="4" rx="2"/><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"/></svg>
                                <input
                                    type="email"
                                    name="email"
                                    id="email"
                                    value="<%= oldInput.email || '' %>"
                                    class="w-full pl-10 pr-4 px-3 focus:outline-none  text-gray-700 <%= errors.find(error => error.param === 'email') ? 'border-red-500' : '' %>"
                                    placeholder="Email"
                                />
                            </div>
                        </div>
                        <% const emailError = errors.find(error => error.param === "email"); %>
                        <% if (emailError) { %>
                        <p class="text-red-600 text-sm mt-1"><%= emailError.msg %></p>
                        <% } %>
                    </div>
                    <!-- Password Field (always shown) -->
                    <div>
                        <label for="password" class="sr-only">Password</label>
                        <div class="relative">
                          <div class="absolute inset-y-0 left-0 pl-3 flex border border-gray-300  focus:ring-2 focus:ring-violet-500 focus:border-violet-500 items-center rounded-lg pointer-events-none py-3 px-2 mb-3">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-lock text-gray-400"><rect width="18" height="11" x="3" y="11" rx="2" ry="2"/><path d="M7 11V7a5 0 0 1 10 0v4"/></svg>
                                <input
                                    type="password"
                                    name="password"
                                    id="password"
                                    class="w-full pl-10 pr-4 px-3 text-gray-700 focus:outline-none <%= errors.find(error => error.param === 'password') ? 'border-red-500' : '' %>"
                                    placeholder="Password"
                                />
                            </div>
                        </div>
                        <% const passwordError = errors.find(error => error.param === "password"); %>
                        <% if (passwordError) { %>
                        <p class="text-red-600 text-sm mt-1"><%= passwordError.msg %></p>
                        <% } %>
                    </div>
                    <% /* Conditional rendering for Confirm Password field */ %>
                    <% if (mode === 'signup') { %>
                    <!-- Confirm Password -->
                    <div>
                        <label for="confirm" class="sr-only">Confirm Password</label>
                        <div class="relative">
                          <div class="absolute inset-y-0 left-0 pl-3 flex border border-gray-300  focus:ring-2 focus:ring-violet-500 focus:border-violet-500 items-center rounded-lg pointer-events-none px-2  py-3 mb-3">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-lock text-gray-400"><rect width="18" height="11" x="3" y="11" rx="2" ry="2"/><path d="M7 11V7a5 0 0 1 10 0v4"/></svg>
                                <input
                                    type="password"
                                    name="confirm"
                                    id="confirm"
                                    class="w-full pl-10 pr-4 px-3 focus:outline-none  text-gray-700 <%= errors.find(error => error.param === 'confirm') ? 'border-red-500' : '' %>"
                                    placeholder="Confirm password"
                                />
                            </div>
                        </div>
                        <% const confirmError = errors.find(error => error.param === "confirm"); %>
                        <% if (confirmError) { %>
                        <p class="text-red-600 text-sm mt-1"><%= confirmError.msg %></p>
                        <% } %>
                    </div>
                    <% } %>
                    <% /* End Conditional rendering for Confirm Password field */ %>
                    <button
                        type="submit"
                        class="w-full bg-blue-500 text-black px-6 py-3 rounded-lg font-bold shadow-md mt-4"
                    >
                        <%= mode === 'login' ? 'Log In' : 'Sign Up' %>
                    </button>
                </main>
                <div class="text-center mt-4 text-gray-600 text-sm">
                    <% if (mode === 'login') { %>
                    <p>
                        Don't have an account?
                        <a href="/signup" class="text-violet-950 hover:underline font-medium bg-black">Sign up</a>
                    </p>
                    <% } else { %>
                    <p>
                        Already have an account?
                        <a href="/login" class="text-violet-950 hover:underline font-medium">Log in</a>
                    </p>
                    <% } %>
                </div>
            </form>
        </section>
    </body>
</html>
